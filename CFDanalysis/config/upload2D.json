{
    "displayName":"2D Building Slice",
    "internalName":"upload2D",
    "description":"This model describes \nthe air flow around a building\n using a 2D horizontal slice.",
    "icon":"upload2D.png",
    "sequence":["mesh","sim"],
    "stages":{
        "mesh":{
            "displayName":"Mesh",
            "app":"cwe-serial",
            "app_input":"geoFile",
            "groups":[
                "Building Geometry",
                "Mesh Density",
                "Subdomains",
                "Boundaries"
            ],
            "results":[
                {
                    "displayName":"Mesh View",
                    "type":"GLmesh"
                },
                {
                    "displayName":"Mesh Agave Log",
                    "type":"text",
                    "file":"logs/.agave.log"
                },
                {
                    "displayName":"Mesh Error Log",
                    "type":"text",
                    "file":"logs/cwe-serial.err"
                },
                {
                    "displayName":"Mesh Output Log",
                    "type":"text",
                    "file":"logs/cwe-serial.out"
                }
            ]
        },
        "sim":{
            "displayName":"Simulation",
            "app":"cwe-parallel",
            "groups":[
                "Simulation Control",
                "Advanced"
            ],
            "results":[
                {
                    "displayName":"Final Flow Velocity Field",
                    "type":"GLdata",
                    "file":"U",
                    "values":"magnitude"
                },
                {
                    "displayName":"Final Flow Pressure Field",
                    "type":"GLdata",
                    "file":"p",
                    "values":"scalar"
                },
                {
                    "displayName":"Force Coefficients",
                    "type":"text",
                    "file":"postProcessing/forceCoeffs/0/forceCoeffs.dat"
                },
                {
                    "displayName":"Sim Agave Log",
                    "type":"text",
                    "file":"logs/.agave.log"
                },
                {
                    "displayName":"Sim Error Log",
                    "type":"text",
                    "file":"logs/cwe-parallel.err"
                },
                {
                    "displayName":"Sim Output Log",
                    "type":"text",
                    "file":"logs/cwe-parallel.out"
                },
                {
                    "displayName":"OpenFOAM Log",
                    "type":"text",
                    "file":"logs/sim.log"
                }
            ]
        }
    },
    "groups":{
        "Building Geometry":{
            "displayName":"Building Geometry",
            "vars":[
                "geoChoose",
                "geoFile",
                "slicePlane",
                "sliceAngle"
                ],
            "image":"placeholderIcon.png"
        },
        "Mesh Density":{
            "displayName":"Mesh Density",
            "vars":[
                "inPad",
                "outPad",
                "highYPad",
                "lowYPad",
                "meshDensity",
                "meshDensityFar"
            ]
        },
        "Subdomains":{
            "displayName":"Subdomains",
            "vars":[
                "innerDomains",
                "inPadDom1",
                "outPadDom1",
                "topPadDom1",
                "bottomPadDom1",
                "meshDensityDom1",
                "inPadDom2",
                "outPadDom2",
                "topPadDom2",
                "bottomPadDom2",
                "meshDensityDom2",
                "inPadDom3",
                "outPadDom3",
                "topPadDom3",
                "bottomPadDom3",
                "meshDensityDom3"
            ]
        },
        "Boundaries":{
            "displayName":"Boundaries",
            "vars":[
                "lowYPlane",
                "highYPlane"
            ]
        },
        "Simulation Control":{
            "displayName":"Simulation Control",
            "vars":[
                "endTime",
                "deltaT",
                "velocity",
                "nu"
            ]
        },
        "Advanced":{
            "displayName":"Advanced",
            "vars":[
                "turbModel",
                "useForceCoeffs",
                "useFieldUmean",
                "useFieldPmean",
                "pisoCorrectors",
                "pisoNonOrthCorrect"
            ]
        }
    },
    "vars":{
        "geoChoose":{
            "displayName":"Select Geometry File",
            "type":"choose",
            "default":"cwe_cube.json",
            "options":{
                "cwe_cube.json": "10x10x10m cube",
                "cwe_cone.json": "10x10x10m cone",
                "uploaded": "Uploaded File"
            }
        },
        "geoFile":{
            "displayName":"Uploaded File",
            "type":"file"
        },
        "slicePlane":{
            "displayName":"Z-coord of 2D Slice Plane",
            "type":"std",
            "default":"1.0",
            "unit":"m",
            "precision":"5"
        },
        "sliceAngle":{
            "displayName":"Rotation of 2D Slice",
            "type":"std",
            "default":"0",
            "unit":"Degrees",
            "precision":"2"
        },
        "endTime":{
            "displayName":"Simulation Duration",
            "type":"std",
            "default":"1.0",
            "unit":"s",
            "precision":"2",
            "sign":"+"
        },
        "deltaT":{
            "displayName":"Simulation Time Step",
            "type":"std",
            "default":"0.1",
            "unit":"s",
            "precision":"6",
            "sign":"+"
        },
        "velocity":{
            "displayName":"Inflow Velocity",
            "type":"std",
            "default":"1",
            "unit":"m/s",
            "precision":"6",
            "sign":"+"
        },
        "nu":{
            "displayName":"Kinematic Viscosity",
            "type":"std",
            "default":"1.5e-05",
            "unit":"m^2/s",
            "precision":"9",
            "sign":"+"
        },
        "inPad":{
            "displayName":"Domain Length (Inlet)",
            "type":"std",
            "default":"8",
            "unit":"times max size of object",
            "precision":"1",
            "sign":"+"
        },
        "outPad":{
            "displayName":"Domain Length (Outlet)",
            "type":"std",
            "default":"20",
            "unit":"times max size of object",
            "precision":"1",
            "sign":"+"
        },
        "highYPad":{
            "displayName":"Domain Length (Top)",
            "type":"std",
            "default":"8",
            "unit":"times max size of object",
            "precision":"1",
            "sign":"+"
        },
        "lowYPad":{
            "displayName":"Domain Length (Bottom)",
            "type":"std",
            "default":"8",
            "unit":"times max size of object",
            "precision":"1",
            "sign":"+"
        },
        "meshDensity":{
            "displayName":"Grid Size (on the bluff body)",
            "type":"std",
            "default":"3",
            "unit":"m",
            "precision":"2",
            "sign":"+"
        },
        "meshDensityFar":{
            "displayName":"Grid Size (on the outer bound)",
            "type":"std",
            "default":"10",
            "unit":"m",
            "precision":"2",
            "sign":"+"
        },
        "lowYPlane":{
            "displayName":"Boundary Condition (Bottom)",
            "type":"choose",
            "default":"SYM_PLANE",
            "options":{
                "SYM_PLANE": "Symmetry Plane",
                "WALL": "Wall"
            }
        },
        "highYPlane":{
            "displayName":"Boundary Condition (Top)",
            "type":"choose",
            "default":"SYM_PLANE",
            "options":{
                "SYM_PLANE": "Symmetry Plane",
                "WALL": "Wall"
            }
        },
        "useForceCoeffs":{
            "displayName":"Compute Force Coefficients?",
            "type":"bool",
            "default": true
        },
        "useFieldUmean":{
            "displayName":"Compute Mean Velocity Field?",
            "type":"bool",
            "default": false
        },
        "useFieldPmean":{
            "displayName":"Compute Mean Pressure Field?",
            "type":"bool",
            "default": false
        },
        "turbModel":{
            "displayName":"Turbulence Model",
            "type":"choose",
            "default":"laminar",
            "options":{
                "laminar":"Laminar Flow model",
                "SpalartAllmaras":"S-A one equation model (RANS)",
                "kEpsilon":"k-epsilon model (RANS)",
                "Smagorinsky":"Smagorinsky SGS model (LES)",
                "kEqn":"One equation eddy-viscosity model (LES)"
            }
        },
        "pisoCorrectors":{
            "displayName":"Number of PISO Correctors",
            "type":"std",
            "default":"2",
            "precision":"int",
            "sign":"+0"
        },
        "pisoNonOrthCorrect":{
            "displayName":"Number of non-orthogonal Correctors",
            "type":"std",
            "default":"1",
            "precision":"int",
            "sign":"+0"
        },
        "innerDomains":{
            "displayName":"Number of Subdomains",
            "type":"std",
            "default":"0",
            "precision":"int",
            "sign":"+0"
        },
        "inPadDom1":{
            "displayName":"Subdomain 1 Length (Inlet)",
            "type":"std",
            "default":"2",
            "unit":"times max size of object",
            "precision":"1",
            "sign":"+",
            "showCondition":"$innerDomains!=0"
        },
        "outPadDom1":{
            "displayName":"Subdomain 1 Length (Outlet)",
            "type":"std",
            "default":"4",
            "unit":"times max size of object",
            "precision":"1",
            "sign":"+",
            "showCondition":"$innerDomains!=0"
        },
        "topPadDom1":{
            "displayName":"Subdomain 1 Length (Top)",
            "type":"std",
            "default":"2",
            "unit":"times max size of object",
            "precision":"1",
            "sign":"+",
            "showCondition":"$innerDomains!=0"
        },
        "bottomPadDom1":{
            "displayName":"Subdomain 1 Length (Bottom)",
            "type":"std",
            "default":"2",
            "unit":"times max size of object",
            "precision":"1",
            "sign":"+",
            "showCondition":"$innerDomains!=0"
        },
        "meshDensityDom1":{
            "displayName":"Grid Size (Edge of Subdomain 1)",
            "type":"std",
            "default":"3",
            "unit":"m",
            "precision":"2",
            "sign":"+",
            "showCondition":"$innerDomains!=0"
        },
        "inPadDom2":{
            "displayName":"Subdomain 2 Length (Inlet)",
            "type":"std",
            "default":"4",
            "unit":"times max size of object",
            "precision":"1",
            "sign":"+"
        },
        "outPadDom2":{
            "displayName":"Subdomain 2 Length (Outlet)",
            "type":"std",
            "default":"6",
            "unit":"times max size of object",
            "precision":"1",
            "sign":"+"
        },
        "topPadDom2":{
            "displayName":"Subdomain 2 Length (Top)",
            "type":"std",
            "default":"4",
            "unit":"times max size of object",
            "precision":"1",
            "sign":"+"
        },
        "bottomPadDom2":{
            "displayName":"Subdomain 2 Length (Bottom)",
            "type":"std",
            "default":"4",
            "unit":"times max size of object",
            "precision":"1",
            "sign":"+"
        },
        "meshDensityDom2":{
            "displayName":"Grid Size (Edge of Subdomain 2)",
            "type":"std",
            "default":"3",
            "unit":"m",
            "precision":"2",
            "sign":"+"
        },
        "inPadDom3":{
            "displayName":"Subdomain 3 Length (Inlet)",
            "type":"std",
            "default":"6",
            "unit":"times max size of object",
            "precision":"1",
            "sign":"+"
        },
        "outPadDom3":{
            "displayName":"Subdomain 3 Length (Outlet)",
            "type":"std",
            "default":"8",
            "unit":"times max size of object",
            "precision":"1",
            "sign":"+"
        },
        "topPadDom3":{
            "displayName":"Subdomain 3 Length (Top)",
            "type":"std",
            "default":"6",
            "unit":"times max size of object",
            "precision":"1",
            "sign":"+"
        },
        "bottomPadDom3":{
            "displayName":"Subdomain 3 Length (Bottom)",
            "type":"std",
            "default":"6",
            "unit":"times max size of object",
            "precision":"1",
            "sign":"+"
        },
        "meshDensityDom3":{
            "displayName":"Grid Size (Edge of Subdomain 3)",
            "type":"std",
            "default":"3",
            "unit":"m",
            "precision":"1",
            "sign":"+"
        }
    }
}
